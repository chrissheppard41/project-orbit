var Moon=function(){function a(a,b,c,d,e,f,g){var h=Facade_engine.SphereGeo({radius:a,segments:b}),i={};i=null!==f?{map:Facade_engine.MeshTexture(f)}:{color:16777215,shading:Facade_engine.FlatShading()};var j=Facade_engine.MeshMaterial({mat:i});this.mn=Facade_engine.Mesh({geometry:h,material:j,x:c,y:d,z:e,update:g}),this.distanceX=c,this.distanceY=d,this.distanceZ=e,this.angle=0}return a.prototype={draw:function(a,b,c){360===this.angle&&(this.angle=0);var d=a+this.distanceX*Math.sin(this.angle*Math.PI/180),e=b+this.distanceY*Math.cos(this.angle*Math.PI/180),f=c+this.distanceZ*Math.sin(this.angle*Math.PI/180);Facade_engine.MeshPosition(this.mn,d,e,f),this.angle+=10/this.distanceX},getMoon:function(){return this.mn}},a}(),Planet=function(){function a(a,b,c,d,e,f,g,h){var i=Facade_engine.SphereGeo({radius:a,segments:b}),j={};j=null!==f?{map:Facade_engine.MeshTexture(f)}:{color:16777215,shading:Facade_engine.FlatShading()};var k=Facade_engine.MeshMaterial({mat:j});this.pl=Facade_engine.Mesh({geometry:i,material:k,x:c,y:d,z:e,update:g}),this.distanceX=c,this.distanceY=d,this.distanceZ=e,this.angle=0,h&&(this.stroke=Facade_engine.DrawStroke({positionX:c,positionY:d})),this.moons=[]}return a.prototype={draw:function(){360===this.angle&&(this.angle=0);var a=this.distanceX*Math.sin(this.angle*Math.PI/180),b=this.distanceY*Math.cos(this.angle*Math.PI/180),c=this.distanceZ*Math.sin(this.angle*Math.PI/180);if(Facade_engine.MeshPosition(this.pl,a,b,c),this.angle+=10/this.distanceX,this.moons.length)for(var d=0;d<this.moons.length;d++)this.moons[d].draw(a,b,c)},getPlanet:function(){return this.pl},addMoon:function(a,b,c,d,e){var f=new Moon(a,b,c,d,e,null,!0,!1);this.moons.push(f)},getMoons:function(){return this.moons},getStroke:function(){return this.stroke}},a}(),Facade_dom=function(){return{Element:function(a){return document.getElementById(a)},Append:function(a,b){a.appendChild(b)}}}(),Facade_engine=function(a){return{Camera:function(b){return this.camera=new a.PerspectiveCamera(b.fov,b.aspect,b.near,b.far),this.camera.position.x=b.x,this.camera.position.y=b.y,this.camera.position.z=b.z,this.camera},CameraAspect:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()},Controls:function(b){return this.controls=new a.OrbitControls(this.camera),this.controls.damping=b.damping,this.controls.addEventListener("change",b.callback),this.controls},ControlsUpdate:function(){this.controls.update()},Scene:function(){return this.scene=new a.Scene,this.scene},SceneAdd:function(a){this.scene.add(a)},Fog:function(b,c){return new a.FogExp2(b,c)},Renderer:function(b){return this.renderer=new a.WebGLRenderer(b),this.RendererSetsize(),this.renderer},RendererSetsize:function(){this.renderer.setSize(window.innerWidth,window.innerHeight)},RendererRender:function(){this.renderer.render(this.scene,this.camera)},PointLight:function(b){var c=new a.PointLight(b.hex,b.intensity,b.distance);return c.position.set(b.x,b.y,b.z),c},AmbientLight:function(b){return new a.AmbientLight(b)},DirectionalLight:function(b){var c=new a.DirectionalLight(b.hex);return c.position.set(b.x,b.y,b.z),c},Stats:function(a){return this.stats=new Stats,this.stats.domElement.style.position=a.position,this.stats.domElement.style.top=a.top,this.stats.domElement.style.zIndex=a.zIndex,this.stats},StatsUpdate:function(){this.stats.update()},getRender:function(){return this.renderer},getStats:function(){return this.stats},SphereGeo:function(b){return new a.SphereGeometry(b.radius,b.segments,b.segments)},MeshMaterial:function(b){return new a.MeshLambertMaterial(b.mat)},Mesh:function(b){var c=new a.Mesh(b.geometry,b.material);return this.MeshPosition(c,b.x,b.y,b.z),c.updateMatrix(),c.matrixAutoUpdate=b.update,c},MeshPosition:function(a,b,c,d){a.position.x=b,a.position.y=c,a.position.z=d},MeshTexture:function(b){return a.ImageUtils.loadTexture(b)},FlatShading:function(){return a.FlatShading},DrawStroke:function(b){var c=new a.CurvePath;c.add(new a.EllipseCurve(0,0,b.positionX,b.positionY,0,2*Math.PI,!1));var d=c.createPointsGeometry(100);return d.computeTangents(),new a.Line(d,new a.LineBasicMaterial({color:4473924,opacity:1}))}}}(THREE),Operation=function(){var a,b,c=[];return{init:function(){Facade_engine.Camera({fov:60,aspect:window.innerWidth/window.innerHeight,near:1,far:1e3,x:0,y:0,z:500}),Facade_engine.Controls({damping:.2,callback:this.render}),Facade_engine.Scene(),this.setPlanets(),this.setLights(),Facade_engine.Renderer({antialias:!1}),a=Facade_dom.Element("container"),Facade_dom.Append(a,Facade_engine.getRender().domElement),Facade_engine.Stats({position:"absolute",top:"0px",zIndex:100}),Facade_dom.Append(a,Facade_engine.getStats().domElement),window.addEventListener("resize",this.onWindowResize,!1),this.animate()},setPlanets:function(){b=new Planet(30,32,0,0,0,null,!1,!1),Facade_engine.SceneAdd(b.getPlanet());var a=new Planet(1,10,50,50,0,null,!0,!0);a.addMoon(.2,5,5,5,0,null),a.addMoon(.3,5,7,7,0,null),c.push(a);var d=new Planet(1,10,150,150,0,null,!0,!0);c.push(d);var e=new Planet(2,10,200,200,0,null,!0,!0);c.push(e);var f=new Planet(5,10,230,260,30,null,!0,!0);if(f.addMoon(.2,5,12,12,0,null),f.addMoon(.3,5,7,7,0,null),f.addMoon(.5,5,10,10,5,null),c.push(f),c.length)for(var g=0;g<c.length;g++){Facade_engine.SceneAdd(c[g].getPlanet()),Facade_engine.SceneAdd(c[g].getStroke());var h=c[g].getMoons();if(h.length)for(var i=0;i<h.length;i++)Facade_engine.SceneAdd(h[i].getMoon())}},setLights:function(){light=new Facade_engine.PointLight({hex:16777215,intensity:1,distance:1e3,x:0,y:0,z:0}),Facade_engine.SceneAdd(light),light=new Facade_engine.AmbientLight(11184810),Facade_engine.SceneAdd(light)},animate:function(){var a=this;if(requestAnimationFrame(function(){a.animate()}),Facade_engine.ControlsUpdate(),c.length)for(var b=0;b<c.length;b++)c[b].draw();this.render()},onWindowResize:function(){Facade_engine.CameraAspect(),Facade_engine.RendererSetsize()},render:function(){Facade_engine.RendererRender(),Facade_engine.StatsUpdate()}}}();!function(){Detector.webgl||Detector.addGetWebGLMessage(),Operation.init()}(THREE);
//# sourceMappingURL=build.min.js.map